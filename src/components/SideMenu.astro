---
import { getCollection } from 'astro:content';
import FormattedDate from './FormattedDate.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

const base = import.meta.env.BASE_URL;
const base3 = base === '/' ? '' : `${base}`;
---

<section>
	<h1>Menu</h1>
	<ul>
		{
			posts.map((post) => (
				<li>
					<a href={`${base3}/blog/${post.id}/`}>
						<h4 class="title">{post.data.title}</h4>
						<p class="date">
							<FormattedDate date={post.data.pubDate} />
						</p>
					</a>
				</li>
			))
		}
	</ul>
</section>

<style>
	section {
		position: fixed;
		top: 0;
	}
	section > h1 {
		margin-top: 3rem;
		font-size: 3rem;
		color: #1d9ecf;
	}
	section > ul {
		padding: 0;
		list-style: none;
		text-align: left;
	}
	section > ul > li {
		margin-top: 2rem;
		margin-left: 1rem;
	}
	section > ul > li > a {
		text-decoration: none;
	}
	section > ul > li > a > h4 {
		color: #1d9ecf;
		padding: 0;
	}
	p.date {
		margin: 0;
	}
</style>
